asyncapi: 2.0.0
info:
  title: PortfolioPro Realtime Events API
  version: 1.0.0
  description: Realtime events for the PortfolioPro mobile application
servers:
  development:
    url: http://localhost:3000
    protocol: ws
channels:
  /users/{user_id}:
    parameters:
      user_id:
        schema:
          type: string
    subscribe:
      summary: User profile updates
      message:
        oneOf:
          - $ref: "#/components/messages/user_updated"
          - $ref: "#/components/messages/user_deleted"
    publish:
      summary: User profile modification requests
      message:
        oneOf:
          - $ref: "#/components/messages/update_user"
          - $ref: "#/components/messages/delete_user"
  /users/{user_id}/social_media_links:
    parameters:
      user_id:
        schema:
          type: string
    subscribe:
      summary: Social media links updates
      message:
        oneOf:
          - $ref: "#/components/messages/social_media_link_created"
          - $ref: "#/components/messages/social_media_link_updated"
          - $ref: "#/components/messages/social_media_link_deleted"
    publish:
      summary: Social media links modification requests
      message:
        oneOf:
          - $ref: "#/components/messages/create_social_media_link"
          - $ref: "#/components/messages/update_social_media_link"
          - $ref: "#/components/messages/delete_social_media_link"
  /users/{user_id}/skills:
    parameters:
      user_id:
        schema:
          type: string
    subscribe:
      summary: Skills updates
      message:
        oneOf:
          - $ref: "#/components/messages/skill_created"
          - $ref: "#/components/messages/skill_updated"
          - $ref: "#/components/messages/skill_deleted"
    publish:
      summary: Skills modification requests
      message:
        oneOf:
          - $ref: "#/components/messages/create_skill"
          - $ref: "#/components/messages/update_skill"
          - $ref: "#/components/messages/delete_skill"
  /users/{user_id}/projects:
    parameters:
      user_id:
        schema:
          type: string
    subscribe:
      summary: Projects updates
      message:
        oneOf:
          - $ref: "#/components/messages/project_created"
          - $ref: "#/components/messages/project_updated"
          - $ref: "#/components/messages/project_deleted"
    publish:
      summary: Projects modification requests
      message:
        oneOf:
          - $ref: "#/components/messages/create_project"
          - $ref: "#/components/messages/update_project"
          - $ref: "#/components/messages/delete_project"
  /projects/{project_id}/screenshots:
    parameters:
      project_id:
        schema:
          type: string
    subscribe:
      summary: Project screenshots updates
      message:
        oneOf:
          - $ref: "#/components/messages/project_screenshot_created"
          - $ref: "#/components/messages/project_screenshot_updated"
          - $ref: "#/components/messages/project_screenshot_deleted"
    publish:
      summary: Project screenshots modification requests
      message:
        oneOf:
          - $ref: "#/components/messages/create_project_screenshot"
          - $ref: "#/components/messages/update_project_screenshot"
          - $ref: "#/components/messages/delete_project_screenshot"
  /users/{user_id}/experiences:
    parameters:
      user_id:
        schema:
          type: string
    subscribe:
      summary: Experiences updates
      message:
        oneOf:
          - $ref: "#/components/messages/experience_created"
          - $ref: "#/components/messages/experience_updated"
          - $ref: "#/components/messages/experience_deleted"
    publish:
      summary: Experiences modification requests
      message:
        oneOf:
          - $ref: "#/components/messages/create_experience"
          - $ref: "#/components/messages/update_experience"
          - $ref: "#/components/messages/delete_experience"
  /users/{user_id}/education:
    parameters:
      user_id:
        schema:
          type: string
    subscribe:
      summary: Education entries updates
      message:
        oneOf:
          - $ref: "#/components/messages/education_created"
          - $ref: "#/components/messages/education_updated"
          - $ref: "#/components/messages/education_deleted"
    publish:
      summary: Education entries modification requests
      message:
        oneOf:
          - $ref: "#/components/messages/create_education"
          - $ref: "#/components/messages/update_education"
          - $ref: "#/components/messages/delete_education"
  /users/{user_id}/key_facts:
    parameters:
      user_id:
        schema:
          type: string
    subscribe:
      summary: Key facts updates
      message:
        oneOf:
          - $ref: "#/components/messages/key_fact_created"
          - $ref: "#/components/messages/key_fact_updated"
          - $ref: "#/components/messages/key_fact_deleted"
    publish:
      summary: Key facts modification requests
      message:
        oneOf:
          - $ref: "#/components/messages/create_key_fact"
          - $ref: "#/components/messages/update_key_fact"
          - $ref: "#/components/messages/delete_key_fact"
  /users/{user_id}/resume_downloads:
    parameters:
      user_id:
        schema:
          type: string
    subscribe:
      summary: Resume download updates
      message:
        oneOf:
          - $ref: "#/components/messages/resume_download_created"
    publish:
      summary: Resume download requests
      message:
        oneOf:
          - $ref: "#/components/messages/create_resume_download"
  /users/{user_id}/contact_messages:
    parameters:
      user_id:
        schema:
          type: string
    subscribe:
      summary: Contact message status updates
      message:
        oneOf:
          - $ref: "#/components/messages/contact_message_created"
          - $ref: "#/components/messages/contact_message_updated"
    publish:
      summary: Contact message creation requests
      message:
        oneOf:
          - $ref: "#/components/messages/create_contact_message"
  /users/{user_id}/app_settings:
    parameters:
      user_id:
        schema:
          type: string
    subscribe:
      summary: App settings updates
      message:
        oneOf:
          - $ref: "#/components/messages/app_setting_updated"
    publish:
      summary: App settings modification requests
      message:
        oneOf:
          - $ref: "#/components/messages/update_app_setting"
  /users/{user_id}/navigation_preferences:
    parameters:
      user_id:
        schema:
          type: string
    subscribe:
      summary: Navigation preferences updates
      message:
        oneOf:
          - $ref: "#/components/messages/navigation_preference_updated"
    publish:
      summary: Navigation preferences modification requests
      message:
        oneOf:
          - $ref: "#/components/messages/update_navigation_preference"
  /global_state:
    subscribe:
      summary: Global state updates
      message:
        oneOf:
          - $ref: "#/components/messages/authentication_state_updated"
          - $ref: "#/components/messages/theme_mode_updated"
          - $ref: "#/components/messages/font_scale_updated"
          - $ref: "#/components/messages/active_tab_updated"
components:
  messages:
    user_updated:
      payload:
        $ref: "#/components/schemas/user_payload"
    user_deleted:
      payload:
        type: object
        properties:
          user_id:
            type: string
    update_user:
      payload:
        $ref: "#/components/schemas/update_user_input_payload"
    delete_user:
      payload:
        type: object
        properties:
          user_id:
            type: string
    social_media_link_created:
      payload:
        $ref: "#/components/schemas/social_media_link_payload"
    social_media_link_updated:
      payload:
        $ref: "#/components/schemas/social_media_link_payload"
    social_media_link_deleted:
      payload:
        type: object
        properties:
          link_id:
            type: string
    create_social_media_link:
      payload:
        $ref: "#/components/schemas/create_social_media_link_input_payload"
    update_social_media_link:
      payload:
        $ref: "#/components/schemas/update_social_media_link_input_payload"
    delete_social_media_link:
      payload:
        type: object
        properties:
          link_id:
            type: string
    skill_created:
      payload:
        $ref: "#/components/schemas/skill_payload"
    skill_updated:
      payload:
        $ref: "#/components/schemas/skill_payload"
    skill_deleted:
      payload:
        type: object
        properties:
          skill_id:
            type: string
    create_skill:
      payload:
        $ref: "#/components/schemas/create_skill_input_payload"
    update_skill:
      payload:
        $ref: "#/components/schemas/update_skill_input_payload"
    delete_skill:
      payload:
        type: object
        properties:
          skill_id:
            type: string
    project_created:
      payload:
        $ref: "#/components/schemas/project_payload"
    project_updated:
      payload:
        $ref: "#/components/schemas/project_payload"
    project_deleted:
      payload:
        type: object
        properties:
          project_id:
            type: string
    create_project:
      payload:
        $ref: "#/components/schemas/create_project_input_payload"
    update_project:
      payload:
        $ref: "#/components/schemas/update_project_input_payload"
    delete_project:
      payload:
        type: object
        properties:
          project_id:
            type: string
    project_screenshot_created:
      payload:
        $ref: "#/components/schemas/project_screenshot_payload"
    project_screenshot_updated:
      payload:
        $ref: "#/components/schemas/project_screenshot_payload"
    project_screenshot_deleted:
      payload:
        type: object
        properties:
          screenshot_id:
            type: string
    create_project_screenshot:
      payload:
        $ref: "#/components/schemas/create_project_screenshot_input_payload"
    update_project_screenshot:
      payload:
        $ref: "#/components/schemas/update_project_screenshot_input_payload"
    delete_project_screenshot:
      payload:
        type: object
        properties:
          screenshot_id:
            type: string
    experience_created:
      payload:
        $ref: "#/components/schemas/experience_payload"
    experience_updated:
      payload:
        $ref: "#/components/schemas/experience_payload"
    experience_deleted:
      payload:
        type: object
        properties:
          experience_id:
            type: string
    create_experience:
      payload:
        $ref: "#/components/schemas/create_experience_input_payload"
    update_experience:
      payload:
        $ref: "#/components/schemas/update_experience_input_payload"
    delete_experience:
      payload:
        type: object
        properties:
          experience_id:
            type: string
    education_created:
      payload:
        $ref: "#/components/schemas/education_payload"
    education_updated:
      payload:
        $ref: "#/components/schemas/education_payload"
    education_deleted:
      payload:
        type: object
        properties:
          education_id:
            type: string
    create_education:
      payload:
        $ref: "#/components/schemas/create_education_input_payload"
    update_education:
      payload:
        $ref: "#/components/schemas/update_education_input_payload"
    delete_education:
      payload:
        type: object
        properties:
          education_id:
            type: string
    key_fact_created:
      payload:
        $ref: "#/components/schemas/key_fact_payload"
    key_fact_updated:
      payload:
        $ref: "#/components/schemas/key_fact_payload"
    key_fact_deleted:
      payload:
        type: object
        properties:
          fact_id:
            type: string
    create_key_fact:
      payload:
        $ref: "#/components/schemas/create_key_fact_input_payload"
    update_key_fact:
      payload:
        $ref: "#/components/schemas/update_key_fact_input_payload"
    delete_key_fact:
      payload:
        type: object
        properties:
          fact_id:
            type: string
    resume_download_created:
      payload:
        $ref: "#/components/schemas/resume_download_payload"
    create_resume_download:
      payload:
        $ref: "#/components/schemas/create_resume_download_input_payload"
    contact_message_created:
      payload:
        $ref: "#/components/schemas/contact_message_payload"
    contact_message_updated:
      payload:
        $ref: "#/components/schemas/contact_message_payload"
    create_contact_message:
      payload:
        $ref: "#/components/schemas/create_contact_message_input_payload"
    app_setting_updated:
      payload:
        $ref: "#/components/schemas/app_setting_payload"
    update_app_setting:
      payload:
        $ref: "#/components/schemas/update_app_setting_input_payload"
    navigation_preference_updated:
      payload:
        $ref: "#/components/schemas/navigation_preference_payload"
    update_navigation_preference:
      payload:
        $ref: "#/components/schemas/update_navigation_preference_input_payload"
    authentication_state_updated:
      payload:
        type: object
        properties:
          current_user:
            anyOf:
              - $ref: "#/components/schemas/user_payload"
              - type: "null"
          auth_token:
            type: string
            nullable: true
          authentication_status:
            type: object
            properties:
              is_authenticated:
                type: boolean
              is_loading:
                type: boolean
            required:
              - is_authenticated
              - is_loading
          error_message:
            type: string
            nullable: true
        required:
          - current_user
          - auth_token
          - authentication_status
          - error_message
    theme_mode_updated:
      payload:
        type: object
        properties:
          mode:
            type: string
            enum:
              - light
              - dark
        required:
          - mode
    font_scale_updated:
      payload:
        type: object
        properties:
          scale:
            type: number
        required:
          - scale
    active_tab_updated:
      payload:
        type: object
        properties:
          tab:
            type: string
        required:
          - tab
  schemas:
    user_payload:
      type: object
      properties:
        user_id:
          type: string
        email:
          type: string
          format: email
        password_hash:
          type: string
        name:
          type: string
        tagline:
          type: string
          nullable: true
        bio_text:
          type: string
          nullable: true
        header_image_url:
          type: string
          nullable: true
        avatar_url:
          type: string
          nullable: true
        video_embed_url:
          type: string
          nullable: true
        created_at:
          type: string
        updated_at:
          type: string
      required:
        - user_id
        - email
        - password_hash
        - name
        - created_at
        - updated_at
    update_user_input_payload:
      type: object
      properties:
        user_id:
          type: string
        email:
          type: string
          format: email
        password_hash:
          type: string
        name:
          type: string
        tagline:
          type: string
          nullable: true
        bio_text:
          type: string
          nullable: true
        header_image_url:
          type: string
          nullable: true
        avatar_url:
          type: string
          nullable: true
        video_embed_url:
          type: string
          nullable: true
      required:
        - user_id
    social_media_link_payload:
      type: object
      properties:
        link_id:
          type: string
        user_id:
          type: string
        platform:
          type: string
        url:
          type: string
        display_order:
          type: integer
      required:
        - link_id
        - user_id
        - platform
        - url
        - display_order
    create_social_media_link_input_payload:
      type: object
      properties:
        link_id:
          type: string
        user_id:
          type: string
        platform:
          type: string
        url:
          type: string
          format: uri
        display_order:
          type: integer
      required:
        - link_id
        - user_id
        - platform
        - url
    update_social_media_link_input_payload:
      type: object
      properties:
        link_id:
          type: string
        user_id:
          type: string
        platform:
          type: string
        url:
          type: string
          format: uri
        display_order:
          type: integer
      required:
        - link_id
    skill_payload:
      type: object
      properties:
        skill_id:
          type: string
        user_id:
          type: string
        name:
          type: string
        category:
          type: string
          nullable: true
        proficiency_level:
          type: string
          nullable: true
        icon_url:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        display_order:
          type: integer
      required:
        - skill_id
        - user_id
        - name
        - display_order
    create_skill_input_payload:
      type: object
      properties:
        skill_id:
          type: string
        user_id:
          type: string
        name:
          type: string
        category:
          type: string
          nullable: true
        proficiency_level:
          type: string
          nullable: true
        icon_url:
          type: string
          nullable: true
          format: uri
        description:
          type: string
          nullable: true
        display_order:
          type: integer
      required:
        - skill_id
        - user_id
        - name
    update_skill_input_payload:
      type: object
      properties:
        skill_id:
          type: string
        user_id:
          type: string
        name:
          type: string
        category:
          type: string
          nullable: true
        proficiency_level:
          type: string
          nullable: true
        icon_url:
          type: string
          nullable: true
          format: uri
        description:
          type: string
          nullable: true
        display_order:
          type: integer
      required:
        - skill_id
    project_payload:
      type: object
      properties:
        project_id:
          type: string
        user_id:
          type: string
        title:
          type: string
        short_description:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        thumbnail_url:
          type: string
          nullable: true
        project_url:
          type: string
          nullable: true
        source_code_url:
          type: string
          nullable: true
        tech_stack:
          type: string
          nullable: true
        display_order:
          type: integer
        created_at:
          type: string
        updated_at:
          type: string
      required:
        - project_id
        - user_id
        - title
        - display_order
        - created_at
        - updated_at
    create_project_input_payload:
      type: object
      properties:
        project_id:
          type: string
        user_id:
          type: string
        title:
          type: string
        short_description:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        thumbnail_url:
          type: string
          nullable: true
          format: uri
        project_url:
          type: string
          nullable: true
          format: uri
        source_code_url:
          type: string
          nullable: true
          format: uri
        tech_stack:
          type: string
          nullable: true
        display_order:
          type: integer
      required:
        - project_id
        - user_id
        - title
    update_project_input_payload:
      type: object
      properties:
        project_id:
          type: string
        user_id:
          type: string
        title:
          type: string
        short_description:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        thumbnail_url:
          type: string
          nullable: true
          format: uri
        project_url:
          type: string
          nullable: true
          format: uri
        source_code_url:
          type: string
          nullable: true
          format: uri
        tech_stack:
          type: string
          nullable: true
        display_order:
          type: integer
      required:
        - project_id
    project_screenshot_payload:
      type: object
      properties:
        screenshot_id:
          type: string
        project_id:
          type: string
        image_url:
          type: string
        caption:
          type: string
          nullable: true
        display_order:
          type: integer
      required:
        - screenshot_id
        - project_id
        - image_url
        - display_order
    create_project_screenshot_input_payload:
      type: object
      properties:
        screenshot_id:
          type: string
        project_id:
          type: string
        image_url:
          type: string
          format: uri
        caption:
          type: string
          nullable: true
        display_order:
          type: integer
      required:
        - screenshot_id
        - project_id
        - image_url
    update_project_screenshot_input_payload:
      type: object
      properties:
        screenshot_id:
          type: string
        project_id:
          type: string
        image_url:
          type: string
          format: uri
        caption:
          type: string
          nullable: true
        display_order:
          type: integer
      required:
        - screenshot_id
    experience_payload:
      type: object
      properties:
        experience_id:
          type: string
        user_id:
          type: string
        role_title:
          type: string
        company_name:
          type: string
        company_logo_url:
          type: string
          nullable: true
        start_date:
          type: string
        end_date:
          type: string
          nullable: true
        is_current:
          type: boolean
        location:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        display_order:
          type: integer
      required:
        - experience_id
        - user_id
        - role_title
        - company_name
        - start_date
        - is_current
        - display_order
    create_experience_input_payload:
      type: object
      properties:
        experience_id:
          type: string
        user_id:
          type: string
        role_title:
          type: string
        company_name:
          type: string
        company_logo_url:
          type: string
          nullable: true
          format: uri
        start_date:
          type: string
        end_date:
          type: string
          nullable: true
        is_current:
          type: boolean
        location:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        display_order:
          type: integer
      required:
        - experience_id
        - user_id
        - role_title
        - company_name
        - start_date
    update_experience_input_payload:
      type: object
      properties:
        experience_id:
          type: string
        user_id:
          type: string
        role_title:
          type: string
        company_name:
          type: string
        company_logo_url:
          type: string
          nullable: true
          format: uri
        start_date:
          type: string
        end_date:
          type: string
          nullable: true
        is_current:
          type: boolean
        location:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        display_order:
          type: integer
      required:
        - experience_id
    education_payload:
      type: object
      properties:
        education_id:
          type: string
        user_id:
          type: string
        institution_name:
          type: string
        degree:
          type: string
          nullable: true
        institution_logo_url:
          type: string
          nullable: true
        start_date:
          type: string
        end_date:
          type: string
          nullable: true
        is_current:
          type: boolean
        location:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        display_order:
          type: integer
      required:
        - education_id
        - user_id
        - institution_name
        - start_date
        - is_current
        - display_order
    create_education_input_payload:
      type: object
      properties:
        education_id:
          type: string
        user_id:
          type: string
        institution_name:
          type: string
        degree:
          type: string
          nullable: true
        institution_logo_url:
          type: string
          nullable: true
          format: uri
        start_date:
          type: string
        end_date:
          type: string
          nullable: true
        is_current:
          type: boolean
        location:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        display_order:
          type: integer
      required:
        - education_id
        - user_id
        - institution_name
        - start_date
    update_education_input_payload:
      type: object
      properties:
        education_id:
          type: string
        user_id:
          type: string
        institution_name:
          type: string
        degree:
          type: string
          nullable: true
        institution_logo_url:
          type: string
          nullable: true
          format: uri
        start_date:
          type: string
        end_date:
          type: string
          nullable: true
        is_current:
          type: boolean
        location:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        display_order:
          type: integer
      required:
        - education_id
    key_fact_payload:
      type: object
      properties:
        fact_id:
          type: string
        user_id:
          type: string
        content:
          type: string
        display_order:
          type: integer
      required:
        - fact_id
        - user_id
        - content
        - display_order
    create_key_fact_input_payload:
      type: object
      properties:
        fact_id:
          type: string
        user_id:
          type: string
        content:
          type: string
        display_order:
          type: integer
      required:
        - fact_id
        - user_id
        - content
    update_key_fact_input_payload:
      type: object
      properties:
        fact_id:
          type: string
        user_id:
          type: string
        content:
          type: string
        display_order:
          type: integer
      required:
        - fact_id
    resume_download_payload:
      type: object
      properties:
        download_id:
          type: string
        user_id:
          type: string
        file_format:
          type: string
        download_url:
          type: string
        created_at:
          type: string
      required:
        - download_id
        - user_id
        - file_format
        - download_url
        - created_at
    create_resume_download_input_payload:
      type: object
      properties:
        download_id:
          type: string
        user_id:
          type: string
        file_format:
          type: string
        download_url:
          type: string
          format: uri
        created_at:
          type: string
      required:
        - download_id
        - user_id
        - file_format
        - download_url
        - created_at
    contact_message_payload:
      type: object
      properties:
        message_id:
          type: string
        user_id:
          type: string
        sender_name:
          type: string
        sender_email:
          type: string
          format: email
        sender_phone:
          type: string
          nullable: true
        message_content:
          type: string
        sent_at:
          type: string
        status:
          type: string
      required:
        - message_id
        - user_id
        - sender_name
        - sender_email
        - message_content
        - sent_at
        - status
    create_contact_message_input_payload:
      type: object
      properties:
        message_id:
          type: string
        user_id:
          type: string
        sender_name:
          type: string
        sender_email:
          type: string
          format: email
        sender_phone:
          type: string
          nullable: true
        message_content:
          type: string
        sent_at:
          type: string
        status:
          type: string
      required:
        - message_id
        - user_id
        - sender_name
        - sender_email
        - message_content
        - sent_at
    app_setting_payload:
      type: object
      properties:
        setting_id:
          type: string
        user_id:
          type: string
        theme_mode:
          type: string
        font_scale:
          type: number
        hidden_sections:
          type: string
          nullable: true
        updated_at:
          type: string
      required:
        - setting_id
        - user_id
        - theme_mode
        - font_scale
        - updated_at
    update_app_setting_input_payload:
      type: object
      properties:
        setting_id:
          type: string
        user_id:
          type: string
        theme_mode:
          type: string
        font_scale:
          type: number
        hidden_sections:
          type: string
          nullable: true
        updated_at:
          type: string
      required:
        - setting_id
    navigation_preference_payload:
      type: object
      properties:
        preference_id:
          type: string
        user_id:
          type: string
        hidden_tabs:
          type: string
          nullable: true
        updated_at:
          type: string
      required:
        - preference_id
        - user_id
        - updated_at
    update_navigation_preference_input_payload:
      type: object
      properties:
        preference_id:
          type: string
        user_id:
          type: string
        hidden_tabs:
          type: string
          nullable: true
        updated_at:
          type: string
      required:
        - preference_id
